<template>
	<div class="min-vh-100 d-flex align-items-center py-4">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-12 col-xl-10">
					<div class="card shadow-soft overflow-hidden border-0">
						<div class="row g-0">
							<div class="col-md-6 d-none d-md-block" style="background: linear-gradient(135deg,#0d6efd,#6f42c1);">
								<div class="h-100 p-4 d-flex flex-column justify-content-between text-white">
									<div>
										<div class="d-flex align-items-center gap-3 mb-3">
											<div class="rounded-circle bg-white text-primary d-flex align-items-center justify-content-center" style="width:48px;height:48px;">üéì</div>
											<h2 class="h5 mb-0">–°–∏—Å—Ç–µ–º–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è</h2>
										</div>
										<p class="mb-3 text-white-50">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫—É—Ä—Å—ã, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –¥–µ–¥–ª–∞–π–Ω—ã ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.</p>
										<ul class="small text-white-50 mb-0 ps-3">
											<li>–†–æ–ª—å‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</li>
											<li>–ö–≤–∏–∑—ã –∏ —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</li>
											<li>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞–º–∏ HR‚Äë–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º</li>
										</ul>
									</div>
									<div class="text-end opacity-75">¬© –¶–∏—Ñ—Ä–æ–≤–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</div>
								</div>
							</div>
							<div class="col-md-6">
								<form class="p-4 p-lg-5" @submit.prevent="onSubmit">
									<h1 class="h4 mb-1 text-center">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
									<p class="text-secondary text-center mb-4">–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</p>
									<div class="mb-3">
										<label class="form-label">–õ–æ–≥–∏–Ω</label>
										<div class="input-group">
											<span class="input-group-text">@</span>
											<input v-model="username" class="form-control" placeholder="ivan.m" autocomplete="username" />
										</div>
									</div>
									<div class="mb-2">
										<label class="form-label">–ü–∞—Ä–æ–ª—å</label>
										<div class="input-group">
											<input :type="showPassword ? 'text' : 'password'" v-model="password" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
											<button type="button" class="btn btn-outline-secondary" @click="showPassword = !showPassword">{{ showPassword ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å' }}</button>
										</div>
									</div>
									<div class="d-flex justify-content-between align-items-center mb-3">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" id="remember" />
											<label class="form-check-label" for="remember">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
										</div>
										<a href="#" class="small">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
									</div>
									<button type="submit" class="btn btn-primary w-100">–í–æ–π—Ç–∏</button>
									<div v-if="error" class="alert alert-danger mt-3 mb-0">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å</div>
									<div class="small text-muted mt-3">
										–î–µ–º–æ‚Äë—É—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏:
										<ul class="mb-0 ps-3">
											<li>–ú–µ—Ç–æ–¥–∏—Å—Ç –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º: ivan.m / 1234</li>
											<li>–†–µ–∂–∏—Å—Å–µ—Ä –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–æ–≤: olga.r / 1234</li>
											<li>–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –æ—Ç–¥–µ–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤: petr.s / 1234</li>
											<li>HR: hr / hr</li>
										</ul>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<script setup>
import { ref } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { useAuthStore } from '../stores/auth'

const auth = useAuthStore()
const route = useRoute()
const router = useRouter()
const username = ref('')
const password = ref('')
const showPassword = ref(false)
const error = ref(false)

function onSubmit() {
	const ok = auth.login(username.value.trim(), password.value)
	if (!ok) {
		error.value = true
		return
	}
	const redirect = route.query.redirect || '/dashboard'
	router.push(String(redirect))
}
</script>

<style scoped>
</style>

